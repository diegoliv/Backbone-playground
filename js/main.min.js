var HelloWorld=Backbone.View.extend({el:$("#container"),template:_.template("<h4>Hello <%= who %>, have a nice <%= what %>!<h4>"),initialize:function(){this.render()},render:function(){this.$el.html(this.template({who:"world",what:"day"}))}}),helloWorld=new HelloWorld,app={};app.Todo=Backbone.Model.extend({defaults:{title:"",completed:!1},toggle:function(){this.save({completed:!this.get("completed")})}}),app.TodoList=Backbone.Collection.extend({model:app.Todo,localStorage:new Store("backbone-todo")}),app.todoList=new app.TodoList,app.TodoView=Backbone.View.extend({tagName:"li",template:_.template($("#item-template").html()),render:function(){return this.$el.html(this.template(this.model.toJSON())),this.input=this.$(".edit"),this},initialize:function(){this.model.on("change",this.render,this),this.model.on("destroy",this.remove,this)},events:{"dblclick label":"edit","keypress .edit":"updateOnEnter","blur .edit":"close","click .toggle":"toggleCompleted","click .destroy":"destroy"},edit:function(){this.$el.addClass("editing"),this.input.focus()},close:function(){var t=this.input.val().trim();t&&this.model.save({title:t}),this.$el.removeClass("editing")},updateOnEnter:function(t){13==t.which&&this.close()},toggleCompleted:function(){this.model.toggle()},destroy:function(){this.model.destroy()}}),app.AppView=Backbone.View.extend({el:"#todoapp",initialize:function(){this.input=this.$("#new-todo"),app.todoList.on("add",this.addAll,this),app.todoList.on("reset",this.addAll,this),app.todoList.fetch()},events:{"keypress #new-todo":"createTodoOnEnter"},createTodoOnEnter:function(t){13===t.which&&this.input.val().trim()&&(app.todoList.create(this.newAttributes()),this.input.val(""))},addOne:function(t){var e=new app.TodoView({model:t});$("#todo-list").append(e.render().el)},addAll:function(){this.$("#todo-list").html(""),app.todoList.each(this.addOne,this)},newAttributes:function(){return{title:this.input.val().trim(),completed:!1}}}),app.appView=new app.AppView,$(function(){Backbone.sync=function(t,e,i){i()};var t=Backbone.Model.extend({defaults:{part1:"Hello",part2:"World",number:null}}),e=Backbone.Collection.extend({model:t}),i=Backbone.View.extend({tagName:"li",template:_.template('<span><%= par1 %> <%= par2 %>! Number <%= num %>!</span> &nbsp; &nbsp; <span class="swap" style="font-family:sans-serif; color:blue; cursor:pointer;">[swap]</span> <span class="delete" style="cursor:pointer; color:red; font-family:sans-serif;">[delete]</span>'),events:{"click span.swap":"swap","click span.delete":"remove"},initialize:function(){_.bindAll(this,"render","unrender","swap","remove"),this.model.bind("change",this.render),this.model.bind("remove",this.unrender)},render:function(){return $(this.el).html(this.template({par1:this.model.get("part1"),par2:this.model.get("part2"),num:this.model.get("number")})),this},unrender:function(){$(this.el).remove()},swap:function(){var t={part1:this.model.get("part2"),part2:this.model.get("part1")};this.model.set(t)},remove:function(){this.model.destroy()}}),o=Backbone.View.extend({el:$("#content"),events:{"click button#add":"addItem"},initialize:function(){_.bindAll(this,"render","addItem","appendItem"),this.collection=new e,this.collection.bind("add",this.appendItem),this.counter=0,this.render()},render:function(){var t=this;$(this.el).append('<button id="add">Add list item</button>'),$(this.el).append("<ul></ul>"),_(this.collection.models).each(function(e){t.appendItem(e)},this)},addItem:function(){this.counter++;var e=new t;e.set({number:this.counter}),this.collection.add(e)},appendItem:function(t){var e=new i({model:t});$("ul",this.el).append(e.render().el)}});new o});